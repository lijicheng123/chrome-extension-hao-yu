# Google搜索自动化功能

## 概述

Google搜索自动化功能提供了完整的端到端自动化流程，从关键词搜索到数据提取，支持页面刷新后的状态恢复。

## 功能特点

### 完整自动化流程
1. **关键词搜索**：自动填入关键词并执行搜索
2. **结果处理**：标记搜索结果状态，逐个点击处理
3. **信息提取**：在目标页面自动提取联系方式信息
4. **自动翻页**：处理完当前页后自动翻页
5. **关键词切换**：处理完当前关键词后自动处理下一个

### 页面刷新恢复
- 支持Google搜索和翻页导致的页面刷新
- 自动恢复之前的自动化状态
- 智能检测页面状态并继续处理

### 智能状态管理
- **待点击**：蓝色边框，等待处理的搜索结果
- **点击中**：橙色边框，正在处理的搜索结果
- **已完成**：绿色边框，已完成处理的搜索结果

## 技术架构

### 模块设计
```
GoogleSearchControl.jsx          # UI控制组件
├── googleSearchAutomationAdapter.js  # 自动化适配器
├── automationStateManager.js    # 状态管理器
├── googleSearchAutomation.js    # 核心工具函数
└── automationConfig.js          # 配置常量
```

### 状态流转
```
用户点击开始 → 搜索关键词 → 页面刷新 → 恢复状态 → 处理结果 → 翻页 → 下个关键词 → 完成
```

## 配置参数

### 可调整配置
- `CLICK_DELAY`: 点击延迟时间（默认2000ms）
- `PAGE_TIMEOUT`: 页面处理超时（默认20000ms）
- `MAX_PAGES_PER_KEYWORD`: 每个关键词最大页数（默认20页）
- `SCROLL_DELAY`: 滚动延迟时间（默认1000ms）

### 存储键前缀
- 所有存储使用 `G_S_A_` 前缀
- 自动清理过期数据
- 支持任务级别的数据隔离

## 使用方法

### 开启自动化
1. 在Google搜索获客面板中
2. 点击"开始自动挖掘"按钮
3. 系统将自动处理所有配置的关键词

### 状态监控
- 实时显示当前处理状态
- 支持暂停/恢复功能
- 验证码自动检测暂停

### 错误恢复
- 页面刷新后自动恢复
- 超时自动跳过
- 验证码暂停保护

## 注意事项

1. **页面刷新**：Google搜索会导致页面刷新，系统已做适配
2. **验证码处理**：遇到验证码时会自动暂停，需要用户手动处理后继续
3. **标签页管理**：目标页面会在新标签页打开，处理完自动关闭
4. **数据提取**：提取的数据会自动保存到任务中

## 故障排除

### 常见问题
1. **自动化没有恢复**：检查是否有正在进行的任务状态
2. **点击失败**：检查页面选择器是否正确
3. **验证码阻断**：手动完成验证码后点击继续

### 调试方法
1. 打开浏览器开发者工具
2. 查看Console日志输出
3. 检查Storage中的状态数据

## 更新日志

### v2.0.0
- 删除手动档模式，简化架构
- 优化状态管理，所有状态存储在Storage中
- 提升页面刷新恢复的稳定性

### v1.0.0
- 初始版本
- 支持完整自动化流程
- 支持页面刷新恢复 